<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>å¦‚ä½•åšå¥½mysqlçš„å¤‡ä»½ | Fan()</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  
  <meta name="keywords" content="MySQLMySQLå¤‡ä»½æ¢å¤" />
  
  
  
  
  <meta name="description" content="å¦‚ä½•åšå¥½MySQLçš„å¤‡ä»½ç‰©ç†å¤‡ä»½è¿˜æ˜¯é€»è¾‘å¤‡ä»½?å…¶å®ç‰©ç†å¤‡ä»½å’Œé€»è¾‘å¤‡ä»½å¹¶æ²¡æœ‰å¥½åä¹‹åˆ†, å…³é”®æ˜¯è¦é€‚åˆä½ çš„åœºæ™¯.  ä¸¤ç§å¤‡ä»½æ–¹å¼çš„å¤‡ä»½å·¥å…·æœ‰: é€»è¾‘å¤‡ä»½å·¥å…·: [mysqldump, mysqlpump, mydumper, select into out file] ç‰©ç†å¤‡ä»½å·¥å…·: [xtrabackup, TokuBackup, Tokudb-xtrabackup]  ä¸¤ç§å¤‡ä»½æ–¹å¼çš„å¯¹æ¯”å¦‚ä¸‹ å¤‡ä»½">
<meta property="og:type" content="article">
<meta property="og:title" content="å¦‚ä½•åšå¥½MySQLçš„å¤‡ä»½">
<meta property="og:url" content="http://fuxkdb.com/2018/04/28/%E5%A6%82%E4%BD%95%E5%81%9A%E5%A5%BDMySQL%E7%9A%84%E5%A4%87%E4%BB%BD/index.html">
<meta property="og:site_name" content="Fan()">
<meta property="og:description" content="å¦‚ä½•åšå¥½MySQLçš„å¤‡ä»½ç‰©ç†å¤‡ä»½è¿˜æ˜¯é€»è¾‘å¤‡ä»½?å…¶å®ç‰©ç†å¤‡ä»½å’Œé€»è¾‘å¤‡ä»½å¹¶æ²¡æœ‰å¥½åä¹‹åˆ†, å…³é”®æ˜¯è¦é€‚åˆä½ çš„åœºæ™¯.  ä¸¤ç§å¤‡ä»½æ–¹å¼çš„å¤‡ä»½å·¥å…·æœ‰: é€»è¾‘å¤‡ä»½å·¥å…·: [mysqldump, mysqlpump, mydumper, select into out file] ç‰©ç†å¤‡ä»½å·¥å…·: [xtrabackup, TokuBackup, Tokudb-xtrabackup]  ä¸¤ç§å¤‡ä»½æ–¹å¼çš„å¯¹æ¯”å¦‚ä¸‹ å¤‡ä»½">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://raw.githubusercontent.com/Fanduzi/How_To_Backup_MySQL/master/Pic/Mydumper_regex.jpeg">
<meta property="og:image" content="https://raw.githubusercontent.com/Fanduzi/How_To_Backup_MySQL/master/Pic/tokudb-xtrabackup_compress.jpeg">
<meta property="og:image" content="https://raw.githubusercontent.com/Fanduzi/pybackup/master/pybackup.png">
<meta property="article:published_time" content="2018-04-27T16:23:00.000Z">
<meta property="article:modified_time" content="2018-05-03T08:37:41.000Z">
<meta property="article:author" content="å¤§èŒƒ">
<meta property="article:tag" content="MySQL">
<meta property="article:tag" content="MySQLå¤‡ä»½æ¢å¤">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://raw.githubusercontent.com/Fanduzi/How_To_Backup_MySQL/master/Pic/Mydumper_regex.jpeg">
  
    <link rel="alternate" href="/atom.xml" title="Fan()" type="application/atom+xml">
  

  

  <link rel="icon" href="/css/images/mylogo.jpeg">
  <link rel="apple-touch-icon" href="/css/images/mylogo.jpeg">
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link href="https://fonts.googleapis.com/css?family=Open+Sans|Montserrat:700" rel="stylesheet" type="text/css">
  <link href="https://fonts.googleapis.com/css?family=Roboto:400,300,300italic,400italic" rel="stylesheet" type="text/css">
  <link href="//netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css" rel="stylesheet">
  <style type="text/css">
    @font-face{font-family:futura-pt; src:url("/css/fonts/FuturaPTBold.otf") format("woff");font-weight:500;font-style:normal;}
    @font-face{font-family:futura-pt-light; src:url("/css/fonts/FuturaPTBook.otf") format("woff");font-weight:lighter;font-style:normal;}
    @font-face{font-family:futura-pt-italic; src:url("/css/fonts/FuturaPTBookOblique.otf") format("woff");font-weight:400;font-style:italic;}
}

  </style>
  
<link rel="stylesheet" href="/css/style.css">


  
<script src="/js/jquery-3.1.1.min.js"></script>

  
<script src="/js/bootstrap.js"></script>


  <!-- Bootstrap core CSS -->
  <link rel="stylesheet" href="/css/bootstrap.css" >

  
    
<link rel="stylesheet" href="/css/dialog.css">

  

  

  
    <link rel="stylesheet" href="/css/header-post.css" >
  

  
  
  
    <link rel="stylesheet" href="/css/vdonate.css" >
  

<meta name="generator" content="Hexo 6.2.0"></head>



  <body data-spy="scroll" data-target="#toc" data-offset="50">


  
  <div id="container">
    <div id="wrap">
      
        <header>

    <div id="allheader" class="navbar navbar-default navbar-static-top" role="navigation">
        <div class="navbar-inner">
          
          <div class="container"> 
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
              <span class="sr-only">Toggle navigation</span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
            </button>

            
              <a class="brand" style="
                 margin-top: 0px;"  
                href="#" data-toggle="modal" data-target="#myModal" >
                  <img width="124px" height="124px" alt="Hike News" src="/css/images/mylogo.jpeg">
              </a>
            
            
            <div class="navbar-collapse collapse">
              <ul class="hnav navbar-nav">
                
                  <li> <a class="main-nav-link" href="/">é¦–é¡µ</a> </li>
                
                  <li> <a class="main-nav-link" href="/archives">å½’æ¡£</a> </li>
                
                  <li> <a class="main-nav-link" href="/tags">æ ‡ç­¾</a> </li>
                
                  <li> <a class="main-nav-link" href="/about">å…³äº</a> </li>
                
                  <li><div id="search-form-wrap">

    <form class="search-form">
        <input type="text" class="ins-search-input search-form-input" placeholder="" />
        <button type="submit" class="search-form-submit"></button>
    </form>
    <div class="ins-search">
    <div class="ins-search-mask"></div>
    <div class="ins-search-container">
        <div class="ins-input-wrapper">
            <input type="text" class="ins-search-input" placeholder="è¯·è¾“å…¥å…³é”®è¯..." />
            <span class="ins-close ins-selectable"><i class="fa fa-times-circle"></i></span>
        </div>
        <div class="ins-section-wrapper">
            <div class="ins-section-container"></div>
        </div>
    </div>
</div>
<script>
(function (window) {
    var INSIGHT_CONFIG = {
        TRANSLATION: {
            POSTS: 'æ–‡ç« ',
            PAGES: 'é¡µé¢',
            CATEGORIES: 'åˆ†ç±»',
            TAGS: 'æ ‡ç­¾',
            UNTITLED: '(æ— æ ‡é¢˜)',
        },
        ROOT_URL: '/',
        CONTENT_URL: '/content.json',
    };
    window.INSIGHT_CONFIG = INSIGHT_CONFIG;
})(window);
</script>

<script src="/js/insight.js"></script>


</div></li>
            </div>
          </div>
                
      </div>
    </div>

</header>



      
            
      <div id="content" class="outer">
        
          <section id="main" style="float:none;"><article id="post-å¦‚ä½•åšå¥½MySQLçš„å¤‡ä»½" style="width: 75%; float:left;" class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" class="article-title" itemprop="name">
      å¦‚ä½•åšå¥½MySQLçš„å¤‡ä»½
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	<a href="/2018/04/28/%E5%A6%82%E4%BD%95%E5%81%9A%E5%A5%BDMySQL%E7%9A%84%E5%A4%87%E4%BB%BD/" class="article-date">
	  <time datetime="2018-04-27T16:23:00.000Z" itemprop="datePublished">2018-04-28</time>
	</a>

      
      
	<a class="article-views">
	<span id="busuanzi_container_page_pv">
		é˜…è¯»é‡<span id="busuanzi_value_page_pv"></span>
	</span>
	</a>

      

    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="å¦‚ä½•åšå¥½MySQLçš„å¤‡ä»½"><a href="#å¦‚ä½•åšå¥½MySQLçš„å¤‡ä»½" class="headerlink" title="å¦‚ä½•åšå¥½MySQLçš„å¤‡ä»½"></a>å¦‚ä½•åšå¥½MySQLçš„å¤‡ä»½</h1><h2 id="ç‰©ç†å¤‡ä»½è¿˜æ˜¯é€»è¾‘å¤‡ä»½"><a href="#ç‰©ç†å¤‡ä»½è¿˜æ˜¯é€»è¾‘å¤‡ä»½" class="headerlink" title="ç‰©ç†å¤‡ä»½è¿˜æ˜¯é€»è¾‘å¤‡ä»½?"></a>ç‰©ç†å¤‡ä»½è¿˜æ˜¯é€»è¾‘å¤‡ä»½?</h2><p>å…¶å®ç‰©ç†å¤‡ä»½å’Œé€»è¾‘å¤‡ä»½å¹¶æ²¡æœ‰å¥½åä¹‹åˆ†, å…³é”®æ˜¯è¦é€‚åˆä½ çš„åœºæ™¯. </p>
<h3 id="ä¸¤ç§å¤‡ä»½æ–¹å¼çš„å¤‡ä»½å·¥å…·æœ‰"><a href="#ä¸¤ç§å¤‡ä»½æ–¹å¼çš„å¤‡ä»½å·¥å…·æœ‰" class="headerlink" title="ä¸¤ç§å¤‡ä»½æ–¹å¼çš„å¤‡ä»½å·¥å…·æœ‰:"></a>ä¸¤ç§å¤‡ä»½æ–¹å¼çš„å¤‡ä»½å·¥å…·æœ‰:</h3><ul>
<li>é€»è¾‘å¤‡ä»½å·¥å…·: [mysqldump, mysqlpump, mydumper, select into out file]</li>
<li>ç‰©ç†å¤‡ä»½å·¥å…·: [xtrabackup, TokuBackup, Tokudb-xtrabackup]</li>
</ul>
<h3 id="ä¸¤ç§å¤‡ä»½æ–¹å¼çš„å¯¹æ¯”å¦‚ä¸‹"><a href="#ä¸¤ç§å¤‡ä»½æ–¹å¼çš„å¯¹æ¯”å¦‚ä¸‹" class="headerlink" title="ä¸¤ç§å¤‡ä»½æ–¹å¼çš„å¯¹æ¯”å¦‚ä¸‹"></a>ä¸¤ç§å¤‡ä»½æ–¹å¼çš„å¯¹æ¯”å¦‚ä¸‹</h3><ul>
<li>å¤‡ä»½é€Ÿåº¦<br>  ç‰©ç†å¤‡ä»½æ¯”é€»è¾‘å¤‡ä»½å¿«å—? ä¸è¦æƒ³å½“ç„¶, è‡³å°‘æˆ‘çš„æµ‹è¯•ç»“æœå¹¶ä¸æ˜¯è¿™æ ·</li>
<li>æ¢å¤é€Ÿåº¦<br>  ç‰©ç†å¤‡ä»½æ¢å¤å®é™…å°±æ˜¯mvæ“ä½œ(ä½¿ç”¨xtrabackup,åœ¨å¤‡ä»½æœºåšprepare), è€Œé€»è¾‘å¤‡ä»½åˆ™æ˜¯æ¼«é•¿çš„å¯¼å…¥.<br>  åŒæœºå™¨ 1.5Tåº“, é€»è¾‘å¤‡ä»½å¤§å°151G, åšæ¢å¤éœ€è¦27å°æ—¶å·¦å³, è€Œç‰©ç†å¤‡ä»½æ¢å¤åˆ™å®Œå…¨å–å†³äºç£ç›˜iops, ä¸ç”¨æµ‹ä¹ŸçŸ¥é“è¦æ¯”é€»è¾‘å¤‡ä»½å¿«å¾ˆå¤š</li>
<li>å¤‡ä»½é›†å¤§å°<br>  å®é™…æµ‹è¯•1Tçš„åº“(å¤§éƒ¨åˆ†ä¸ºInnoDBè¡¨), é€»è¾‘å¤‡ä»½é›†å¤§å°ä¸º<code>46G</code>, è€Œç‰©ç†å¤‡ä»½ä¸º<code>255G</code></li>
</ul>
<p>æ ¹æ®ä»¥ä¸Šä¸‰ç‚¹, å°±å¯ä»¥é€‰æ‹©å¤‡ä»½æ–¹å¼äº†å—? æˆ‘è®¤ä¸ºä¸èƒ½. è¿˜æœ‰ä¸€ç‚¹æ˜¯æ•°æ®åº“æœåŠ¡å™¨å’Œå¤‡ä»½æœåŠ¡å™¨ä¹‹é—´çš„ç½‘ç»œæƒ…å†µ, å’Œä½ æœŸæœ›çš„æ¢å¤æ—¶é—´æ˜¯å¤šä¹…</p>
<a id="more"></a>
<h3 id="é€‰æ‹©ä»€ä¹ˆæ ·çš„å¤‡ä»½å–å†³äºä½ æœŸæœ›çš„MTTRå€¼å’Œä½ çš„æ•°æ®åº“ä½“ç§¯"><a href="#é€‰æ‹©ä»€ä¹ˆæ ·çš„å¤‡ä»½å–å†³äºä½ æœŸæœ›çš„MTTRå€¼å’Œä½ çš„æ•°æ®åº“ä½“ç§¯" class="headerlink" title="é€‰æ‹©ä»€ä¹ˆæ ·çš„å¤‡ä»½å–å†³äºä½ æœŸæœ›çš„MTTRå€¼å’Œä½ çš„æ•°æ®åº“ä½“ç§¯"></a>é€‰æ‹©ä»€ä¹ˆæ ·çš„å¤‡ä»½å–å†³äºä½ æœŸæœ›çš„<a target="_blank" rel="noopener" href="https://baike.baidu.com/item/MTTR/2553404?fr=aladdin"><em>MTTR</em></a>å€¼å’Œä½ çš„æ•°æ®åº“ä½“ç§¯</h3><p>ä»¥ç›®å‰æˆ‘ç®¡ç†çš„æ•°æ®åº“ä¸ºä¾‹, æœ‰ä¸‰å°å¤‡ä»½æœåŠ¡å™¨ç”¨äºå­˜å‚¨å¤‡ä»½, æˆ‘ä»¬çš„åº“éƒ½æ˜¯å»ºåœ¨ECSä¸Š, å„ç§äº‘éƒ½æœ‰.<br>å¦‚æœæ•°æ®åº“æœåŠ¡å™¨å’Œå¤‡æœåŠ¡å™¨å¯ä»¥é€šè¿‡å†…ç½‘æ¥ä¼ è¾“å¤‡ä»½, é‚£ä¹ˆå¤§æ¦‚100å¤šGçš„å¤‡ä»½è¦ä¼ 2å°æ—¶(å¤§æ¦‚100M/s), å¦‚æœä½ çš„åº“å°±æ˜¯è¿™ä¹ˆå¤§, é‚£ä¹ˆæ— è®ºä½ é€‰æ‹©å“ªç§æ–¹å¼å¤‡ä»½, éƒ½åšä¸åˆ°å¿«é€Ÿæ¢å¤. æ›´åˆ«æå¾ˆå¤šæ•°æ®åº“æœåŠ¡å™¨å’Œå¤‡ä»½æœåŠ¡å™¨è¿˜åªèƒ½ç”¨å¤–ç½‘ä¼ è¾“å¤‡ä»½äº†</p>
<ul>
<li>å¦‚æœå¯ä»¥ä¸¥æ ¼æ§åˆ¶æ•°æ®åº“å¤§å°, åŒæ—¶æ®åº“æœåŠ¡å™¨å’Œå¤‡æœåŠ¡å™¨é—´ä½¿ç”¨ä¸‡å…†ç½‘å¡ä¼ è¾“å¤‡ä»½, é‚£ä¹ˆæ— ç–‘, ç‰©ç†å¤‡ä»½æ˜¯æœ€å¥½çš„, å› ä¸ºæ¢å¤å¿«</li>
<li>å¦‚æœæ— æ³•æ§åˆ¶æ•°æ®åº“å¤§å°(ä¸è®¨è®ºä¸ºä»€ä¹ˆæ— æ³•æ§åˆ¶), åŒæ—¶æ®åº“æœåŠ¡å™¨å’Œå¤‡æœåŠ¡å™¨é—´ç½‘ç»œåƒåœ¾, é‚£ä¹ˆä»»ä½•ä¸€ç§å¤‡ä»½æ–¹å¼éƒ½æ— æ³•åšåˆ°å¿«é€Ÿæ¢å¤, æ­¤æ—¶ä¼˜å…ˆè€ƒè™‘ä½¿ç”¨å¤‡ä»½é›†è¾ƒå°çš„æ–¹å¼è¿›è¡Œå¤‡ä»½.</li>
<li>æ— è®ºé‚£ç§å¤‡ä»½æ–¹å¼, éƒ½ä¸æ˜¯ç”¨æ¥åšæ•…éšœæ¢å¤çš„, å‡ºæ•…éšœäº†è¯·åšåˆ‡æ¢, æå‰åšå¥½é«˜å¯ç”¨, è¿™äº›å¤‡ä»½æ˜¯ç”¨æ¥æ­å»ºä»åº“, æ¢å¤éƒ¨åˆ†æ•°æ® å’Œ åšæ•°æ®çš„æœ€åä¸€é“ä¿éšœç”¨çš„.</li>
</ul>
<h2 id="é€‰æ‹©å¥½äº†å¤‡ä»½æ–¹å¼-å¦‚å’Œç”¨å¥½-é¿å…è¸©å‘"><a href="#é€‰æ‹©å¥½äº†å¤‡ä»½æ–¹å¼-å¦‚å’Œç”¨å¥½-é¿å…è¸©å‘" class="headerlink" title="é€‰æ‹©å¥½äº†å¤‡ä»½æ–¹å¼, å¦‚å’Œç”¨å¥½/é¿å…è¸©å‘?"></a>é€‰æ‹©å¥½äº†å¤‡ä»½æ–¹å¼, å¦‚å’Œç”¨å¥½/é¿å…è¸©å‘?</h2><p>å¼€æºçš„ä¸œè¥¿, æ²¡æœ‰ä»€ä¹ˆæ˜¯100%é è°±çš„, å°±åœ¨åˆšæ‰, Mydumperä½œè€…è¿˜å¤„ç†äº†æˆ‘æçš„ä¸€ä¸ªissue<br><img src="https://raw.githubusercontent.com/Fanduzi/How_To_Backup_MySQL/master/Pic/Mydumper_regex.jpeg" alt="image"></p>
<blockquote>
<p>ç°åœ¨ç½‘ä¸Šå¤§éƒ¨åˆ†çš„mydumperæ–‡æ¡£éƒ½æ˜¯é”™çš„, å› ä¸ºå®˜æ–¹READMEå°±æ˜¯é”™çš„, å¹¶ä¸”ä»–ä»¬çœ¼é«˜æ‰‹ä½æ²¡æœ‰å®é™…æµ‹è¯•</p>
</blockquote>
<p>  â€‹</p>
<p>æ— è®ºä½¿ç”¨å“ªç§å¤‡ä»½æ–¹å¼è¯·å…ˆææ‡‚å¤‡ä»½åŸç†, è‡ªå·±å¼€<code>General Log</code>è§‚å¯Ÿåˆ†æ, åŸºæœ¬ä¸Šè¿™æ ·å·²ç»èƒ½ç ”ç©¶ä¸ªå…«ä¹åäº†, ç„¶åå¯ä»¥çœ‹å¤§ç¥çš„æ–‡ç« :<br><a target="_blank" rel="noopener" href="http://geek.csdn.net/news/detail/210851">mysqldumpä¸innobackupexå¤‡ä»½è¿‡ç¨‹çŸ¥å¤šå°‘ï¼ˆä¸€ï¼‰</a><br><a target="_blank" rel="noopener" href="http://geek.csdn.net/news/detail/219681">mysqldumpä¸innobackupexå¤‡ä»½è¿‡ç¨‹çŸ¥å¤šå°‘ï¼ˆäºŒï¼‰</a><br><a target="_blank" rel="noopener" href="http://geek.csdn.net/news/detail/228711">mysqldumpä¸innobackupexå¤‡ä»½è¿‡ç¨‹çŸ¥å¤šå°‘ï¼ˆä¸‰ï¼‰</a><br><a target="_blank" rel="noopener" href="http://geek.csdn.net/news/detail/229325">mysqldumpä¸innobackupexå¤‡ä»½è¿‡ç¨‹çŸ¥å¤šå°‘ï¼ˆå®Œç»“ç¯‡ï¼‰</a></p>
<h3 id="é€»è¾‘å¤‡ä»½"><a href="#é€»è¾‘å¤‡ä»½" class="headerlink" title="é€»è¾‘å¤‡ä»½"></a>é€»è¾‘å¤‡ä»½</h3><h4 id="æ·±å‘-mysqldump-ä¸é”éäº‹åŠ¡è¡¨"><a href="#æ·±å‘-mysqldump-ä¸é”éäº‹åŠ¡è¡¨" class="headerlink" title="æ·±å‘! mysqldump ä¸é”éäº‹åŠ¡è¡¨"></a>æ·±å‘! mysqldump ä¸é”éäº‹åŠ¡è¡¨</h4><p>å¦‚æœä½ ä»¬æ•°æ®åº“æœ‰å¾ˆå¤šMyISAMè¡¨,  é‚£çœŸçš„æ˜¯ä¸åº”è¯¥å•Š,  å·²ç»æ˜¯è¢«æ—¶ä»£æŠ›å¼ƒçš„å¼•æ“äº†<br>mysqldumpåœ¨å¤‡ä»½MyISAMè¡¨æ—¶, æ˜¯ä¸é”DMLçš„ ,ä¹Ÿå°±æ˜¯è¯´å¦‚æœå¤‡ä»½æœŸé—´å¯¹MyISAMè¡¨æœ‰DMLæ“ä½œçš„è¯, é‚£ä¹ˆæ•´ä¸ªå¤‡ä»½é›†æ˜¯ä¸èƒ½ä¿è¯ä¸€è‡´æ€§çš„, è¯¦è§mysqldumpä¸<a target="_blank" rel="noopener" href="http://geek.csdn.net/news/detail/228711">mysqldumpä¸innobackupexå¤‡ä»½è¿‡ç¨‹çŸ¥å¤šå°‘ï¼ˆä¸‰ï¼‰</a>ä¸­çš„å‘ä¸€</p>
<h4 id="å¤‡ä»½æœŸé—´å½“å¿ƒDDL"><a href="#å¤‡ä»½æœŸé—´å½“å¿ƒDDL" class="headerlink" title="å¤‡ä»½æœŸé—´å½“å¿ƒDDL"></a>å¤‡ä»½æœŸé—´å½“å¿ƒDDL</h4><p>è¿™ä¸ªå‘ä½¿ç”¨å®˜æ–¹å‘å‹ç‰ˆæœ¬çš„MySQLæ•°æ®åº“æ—¶, æ— è®ºä½¿ç”¨xtrabackupè¿˜æ˜¯mysqldumpè¿˜æ˜¯mydumperéƒ½æœ‰å¯èƒ½å‘ç”Ÿ<br>å…·ä½“å°±æ˜¯ä½¿ç”¨<code>START TRANSACTION /*!40100 WITH CONSISTENT SNAPSHOT */;</code>è¯­å¥æ˜¾å¼å¼€å¯ä¸€ä¸ªäº‹åŠ¡ä¹‹åï¼Œè¯¥äº‹åŠ¡æ‰§è¡Œselectä¹‹å‰ï¼Œè¯¥è¡¨è¢«å…¶ä»–ä¼šè¯æ‰§è¡Œäº†DDLä¹‹åæ— æ³•æŸ¥è¯¢æ•°æ® </p>
<p>è¯¦è§mysqldumpä¸<a target="_blank" rel="noopener" href="http://geek.csdn.net/news/detail/228711">mysqldumpä¸innobackupexå¤‡ä»½è¿‡ç¨‹çŸ¥å¤šå°‘ï¼ˆä¸‰ï¼‰</a>ä¸­çš„å‘äºŒ</p>
<p>Aä¼šè¯</p>
<figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">root@localhost 10:52: [test1]&gt; show create table fan;</span><br><span class="line"><span class="code">+-------+</span>------------------------------------------------------------------------------------------+</span><br><span class="line">| Table | Create Table |</span><br><span class="line"><span class="code">+-------+</span>------------------------------------------------------------------------------------------+</span><br><span class="line">| fan | CREATE TABLE <span class="code">`fan`</span> (</span><br><span class="line"><span class="code">  `id` int(11) DEFAULT NULL</span></span><br><span class="line">) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 |</span><br><span class="line"><span class="code">+-------+</span>------------------------------------------------------------------------------------------+</span><br><span class="line">1 row in set (0.00 sec)</span><br><span class="line"></span><br><span class="line">root@localhost 10:52: [test1]&gt; START TRANSACTION /<span class="strong">*!40100 WITH CONSISTENT SNAPSHOT *</span>/;</span><br><span class="line">Query OK, 0 rows affected (0.00 sec)</span><br></pre></td></tr></table></figure>
<p>Bä¼šè¯ æ‰§è¡ŒDDLè¯­å¥å¢åŠ ä¸€åˆ—</p>
<figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">root@</span>localhost <span class="number">10</span>:<span class="number">53</span>: [test1]&gt; alter table fan add col1 varchar(<span class="number">10</span>);</span><br><span class="line">Query OK, <span class="number">0</span> rows affected (<span class="number">0.34</span> sec)</span><br><span class="line">Records: <span class="number">0</span> Duplicates: <span class="number">0</span> Warnings: <span class="number">0</span></span><br></pre></td></tr></table></figure>
<p>Aä¼šè¯å†å»æŸ¥è¯¢æ•°æ®, æŠ¥é”™</p>
<figure class="highlight subunit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">root@localhost 10:52: [test1]&gt; select * from fan;</span><br><span class="line"><span class="keyword">ERROR </span>1412 (HY000): Table definition has changed, please retry transaction</span><br></pre></td></tr></table></figure>
<p>Xtrabackupä¼šæŠ›å‡ºå¼‚å¸¸æ—¥å¿—</p>
<figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-attr">[FATAL]</span> <span class="selector-tag">InnoDB</span>: <span class="selector-tag">An</span> <span class="selector-tag">optimized</span>(without redo logging) <span class="selector-tag">DDLoperation</span> <span class="selector-tag">has</span> <span class="selector-tag">been</span> <span class="selector-tag">performed</span>. <span class="keyword">All</span> <span class="selector-tag">modified</span> <span class="selector-tag">pages</span> <span class="selector-tag">may</span> <span class="selector-tag">not</span> <span class="selector-tag">have</span> <span class="selector-tag">been</span> <span class="selector-tag">flushed</span> <span class="selector-tag">to</span> <span class="selector-tag">the</span> <span class="selector-tag">disk</span> <span class="selector-tag">yet</span>. </span><br></pre></td></tr></table></figure>
<p>è€Œmysqldumpå’Œmydumperè²Œä¼¼ä¸ä¼š? å¿˜äº†. æ€»ä¹‹, è¿™ä¼šå¯¼è‡´å¤‡ä»½ä¸å®Œæ•´. </p>
<p>Perconaç‰ˆæœ¬é€šè¿‡<a target="_blank" rel="noopener" href="https://www.percona.com/doc/percona-server/5.6/management/backup_locks.html">LOCK TABLES FOR BACKUP</a>è§£å†³äº†è¿™ä¸ªé—®é¢˜</p>
<blockquote>
<p><code>LOCK TABLES FOR BACKUP</code>ä½¿ç”¨æ–°çš„MDLé”ç±»å‹æ¥é˜»æ­¢æ›´æ–°éäº‹åŠ¡è¡¨å’Œæ‰€æœ‰è¡¨çš„å’ŒDDLè¯­å¥. æ›´å…·ä½“åœ°è¯´ï¼Œå¦‚æœæœ‰ä¸€ä¸ªæ´»åŠ¨çš„<code>LOCK TABLES FOR BACKUP</code>é”ï¼Œæ‰€æœ‰DDLè¯­å¥ä»¥åŠå¯¹MyISAMï¼ŒCSVï¼ŒMEMORYå’ŒARCHIVEè¡¨çš„æ‰€æœ‰æ›´æ–°å°†è¢«é˜»æ­¢,å¹¶åœ¨PERFORMANCE_SCHEMAæˆ–PROCESSLISTä»¥<code>Waiting for backup lock</code>çš„çŠ¶æ€æ˜¾ç¤º. é’ˆå¯¹æ‰€æœ‰è¡¨çš„SELECTæŸ¥è¯¢å’Œé’ˆå¯¹InnoDBï¼ŒBlackholeå’ŒFederatedè¡¨çš„INSERT / REPLACE / UPDATE / DELETEä¸å—<code>LOCK TABLES FOR BACKUP</code>çš„å½±å“ã€‚Blackholeè¡¨æ˜¾ç„¶ä¸å¤‡ä»½æ— å…³ï¼Œå¹¶ä¸”Federatedè¡¨è¢«é€»è¾‘å’Œç‰©ç†å¤‡ä»½å·¥å…·å¿½ç•¥ </p>
</blockquote>
<p>ä½¿ç”¨Perconaç‰ˆæœ¬æ—¶ mysqldumpå¢åŠ äº†<code>--lock-for-backup</code>é€‰é¡¹, è€Œmydumperä¼šè‡ªåŠ¨æŸ¥çœ‹<code>have_backup_locks</code>å‚æ•°æ¥åˆ¤æ–­æ˜¯å¦å¯ä»¥ä½¿ç”¨<code>LOCK TABLES FOR BACKUP</code>é”</p>
<figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (!no_locks) &#123;</span><br><span class="line">    <span class="comment">// Percona Backup Locks</span></span><br><span class="line">    <span class="keyword">if</span>(!no_backup_locks)&#123;</span><br><span class="line">        mysql<span class="constructor">_query(<span class="params">conn</span>,<span class="string">&quot;SELECT @@have_backup_locks&quot;</span>)</span>;</span><br><span class="line">        MYSQL_RES *rest = mysql<span class="constructor">_store_result(<span class="params">conn</span>)</span>;</span><br><span class="line">        <span class="keyword">if</span>(rest != NULL<span class="operator"> &amp;&amp; </span>mysql<span class="constructor">_num_rows(<span class="params">rest</span>)</span>)&#123;</span><br><span class="line">            mysql<span class="constructor">_free_result(<span class="params">rest</span>)</span>;</span><br><span class="line">            g<span class="constructor">_message(<span class="string">&quot;Using Percona Backup Locks&quot;</span>)</span>;</span><br><span class="line">            have_backup_locks=<span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(have_backup_locks)&#123;</span><br><span class="line">        <span class="keyword">if</span>(mysql<span class="constructor">_query(<span class="params">conn</span>, <span class="string">&quot;LOCK TABLES FOR BACKUP&quot;</span>)</span>) &#123;</span><br><span class="line">            g<span class="constructor">_critical(<span class="string">&quot;Couldn&#x27;t acquire LOCK TABLES FOR BACKUP, snapshots will not be consistent: %s&quot;</span>,<span class="params">mysql_error</span>(<span class="params">conn</span>)</span>);</span><br><span class="line">            errors++;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(mysql<span class="constructor">_query(<span class="params">conn</span>, <span class="string">&quot;LOCK BINLOG FOR BACKUP&quot;</span>)</span>) &#123;</span><br><span class="line">            g<span class="constructor">_critical(<span class="string">&quot;Couldn&#x27;t acquire LOCK BINLOG FOR BACKUP, snapshots will not be consistent: %s&quot;</span>,<span class="params">mysql_error</span>(<span class="params">conn</span>)</span>);</span><br><span class="line">            errors++;</span><br><span class="line">        &#125;</span><br></pre></td></tr></table></figure>
<h4 id="å½“å¿ƒtimestampç±»å‹å­—æ®µ"><a href="#å½“å¿ƒtimestampç±»å‹å­—æ®µ" class="headerlink" title="å½“å¿ƒtimestampç±»å‹å­—æ®µ"></a>å½“å¿ƒtimestampç±»å‹å­—æ®µ</h4><p>å…·ä½“è§<a target="_blank" rel="noopener" href="http://b2daf797.wiz03.com/share/s/2OSLun3V44CI2LVCy70ROCI32vOJp62OTkRE2R_X4x0HZnC2">mysqldumpå¯¼å‡ºæ³¨æ„timestampç±»å‹</a></p>
<p>â€‹</p>
<h4 id="SELECT-INTO-OUT-FILEè¿™è´§æœ‰ä»€ä¹ˆç”¨"><a href="#SELECT-INTO-OUT-FILEè¿™è´§æœ‰ä»€ä¹ˆç”¨" class="headerlink" title="SELECT INTO OUT FILEè¿™è´§æœ‰ä»€ä¹ˆç”¨?"></a>SELECT INTO OUT FILEè¿™è´§æœ‰ä»€ä¹ˆç”¨?</h4><p>ä¸€ä¸ªDELETEæ²¡æœ‰å†™whereæ¡ä»¶çš„é…¸çˆ½ä½ å¯æ›¾ä½“ä¼š?<br>ä½ è¯´, æˆ‘æœ‰<a target="_blank" rel="noopener" href="https://github.com/danfengcao/binlog2sql">binlog2sql</a>å¤§æ³•<br>æˆ‘è¯´, å˜»å˜», æˆ‘ä»¬è¿˜åœ¨ç”¨<a target="_blank" rel="noopener" href="https://dev.mysql.com/doc/refman/5.7/en/binary-log-formats.html">Statement</a>æ ¼å¼<br>æ‚²å‰§çš„æˆ‘, è¿˜æœ‰ä¸€æ ¹ç¨»è‰, é‚£å°±æ˜¯<code>SELECT INTO OUT FILE</code>å¤§æ³•<br>å‡è®¾ä½ è¦æ‰§è¡Œä¸‹é¢è¿™æ›´æ–°</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">update</span> important_db.important_table <span class="keyword">set</span> col1=<span class="string">&#x27;abc&#x27;</span> <span class="keyword">where</span> <span class="keyword">id</span>&lt;<span class="number">1000</span></span><br></pre></td></tr></table></figure>
<p>é‚£å¯å¾—å…ˆ</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="keyword">id</span>,col1 <span class="keyword">from</span> important_db.important_table <span class="keyword">where</span> <span class="keyword">id</span>&lt;<span class="number">1000</span> <span class="keyword">into</span> <span class="keyword">outfile</span> <span class="string">&#x27;/tmp/fan.sql&#x27;</span>;</span><br></pre></td></tr></table></figure>
<p>çœŸçš„å‡ºäº†é—®é¢˜, å¯ä»¥è¿™æ ·æ¢å¤</p>
<figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">cat</span> fan.sql | awk &#x27;&#123;<span class="keyword">print</span> <span class="string">&quot;update important_db.important_table set col1=&quot;</span><span class="variable">$2</span>,<span class="string">&quot; where id=&quot;</span><span class="variable">$1</span><span class="string">&quot;;&quot;</span>&#125;&#x27; &gt; roll_back.sql</span><br><span class="line">mysql important_db important_tableoll_back.sql</span><br></pre></td></tr></table></figure>
<h4 id="TokuDBå¼•æ“è¡¨å’‹å¤‡ä»½"><a href="#TokuDBå¼•æ“è¡¨å’‹å¤‡ä»½" class="headerlink" title="TokuDBå¼•æ“è¡¨å’‹å¤‡ä»½?"></a>TokuDBå¼•æ“è¡¨å’‹å¤‡ä»½?</h4><p>é€»è¾‘å¤‡ä»½mydumper,mysqldumpéƒ½å¯ä»¥, åè€…æ— æ³•ä¿è¯éäº‹åŠ¡è¡¨ä¸€è‡´æ€§<br>ç‰©ç†å¤‡ä»½, Xtrabackupä¸æ”¯æŒ, TokuBackupæ²¡è¯•è¿‡, å¯ä»¥ä½¿ç”¨<a target="_blank" rel="noopener" href="https://github.com/xelabs/tokudb-xtrabackup">Tokudb-xtrabackup</a><br><a target="_blank" rel="noopener" href="http://b2daf797.wiz03.com/share/s/2OSLun3V44CI2LVCy70ROCI32tEoPw0IXAjc2oGLxN2xQNrh">Tokudb-xtrabackupå®‰è£…</a><br>ä¸è¿‡ä½¿ç”¨Tokudb-xtrabackupå¤‡ä»½, åŸºæœ¬æ˜¯ä½ çš„Tokudbè¡¨å¤šå¤§,å¤‡ä»½å°±æ˜¯å¤šå¤§äº†, ä½ æœ‰1Tçš„ tokudbè¡¨, ç‰©ç†å¤‡å‡ºæ¥åŸºæœ¬å°±æ˜¯1Täº†â€¦.<br><img src="https://raw.githubusercontent.com/Fanduzi/How_To_Backup_MySQL/master/Pic/tokudb-xtrabackup_compress.jpeg" alt="image"></p>
<p>æ‰€ä»¥è¿˜æ˜¯é€»è¾‘å¤‡ä»½å§, èµ·ç å¤‡ä»½é›†å°</p>
<h2 id="é‡ä¸­ä¹‹é‡-binlogå¤‡ä»½"><a href="#é‡ä¸­ä¹‹é‡-binlogå¤‡ä»½" class="headerlink" title="é‡ä¸­ä¹‹é‡, binlogå¤‡ä»½"></a>é‡ä¸­ä¹‹é‡, binlogå¤‡ä»½</h2><p>ä¼—æ‰€å‘¨çŸ¥,Binlogä¸­è®°å½•äº†æ•°æ®åº“çš„æ‰€æœ‰å˜åŒ–, é€šè¿‡å¤‡ä»½ + é‡æ¼”binlog, å¯ä»¥å°†å¤‡ä»½æ¢å¤åˆ°ä»»æ„æ—¶é—´ç‚¹<br>è¿˜åœ¨ç”¨rsyncåŒæ­¥binlogå—? ä½ Outäº†<br>åœ¨5.7ç‰ˆæœ¬, mysqlbinlogå‘½ä»¤å¢åŠ ä¸€ä¸ªæ–°åŠŸèƒ½, å¯ä»¥ä¼ªè£…æˆä»åº“æŒç»­åŒæ­¥ä¸»åº“çš„binlogæ–‡ä»¶<br>è¯¦è§<a target="_blank" rel="noopener" href="https://dev.mysql.com/doc/refman/5.7/en/mysqlbinlog-backup.html">Using mysqlbinlog to Back Up Binary Log Files</a></p>
<p>ç›®å‰çº¿ä¸Šä½¿ç”¨äº†æˆ‘å†™çš„è„šæœ¬åšäº†ä¸€æ¬¡å°è£…<a target="_blank" rel="noopener" href="https://github.com/Fanduzi/Binlog_Server">Binlog_Server</a></p>
<h2 id="åºŸè¯è¿™ä¹ˆå¤š-å¦‚ä½•ç®¡ç†å¥½ä½ çš„å¤‡ä»½"><a href="#åºŸè¯è¿™ä¹ˆå¤š-å¦‚ä½•ç®¡ç†å¥½ä½ çš„å¤‡ä»½" class="headerlink" title="åºŸè¯è¿™ä¹ˆå¤š, å¦‚ä½•ç®¡ç†å¥½ä½ çš„å¤‡ä»½?"></a>åºŸè¯è¿™ä¹ˆå¤š, å¦‚ä½•ç®¡ç†å¥½ä½ çš„å¤‡ä»½?</h2><p>æ•°æ®åº“ä¼—å¤š, æˆ‘æ¥æ‰‹å‰, å¤‡ä»½é€šè¿‡crontabè°ƒç”¨shellè„šæœ¬å®ç°, å¤‡ä»½å®Œæˆåå†å‘é€åˆ°å¤‡ä»½æœº.<br>è¿™æ ·åšçš„å‡ ç‚¹ä¸è¶³:</p>
<ul>
<li>å¤‡ä»½å¤±è´¥äº†æ²¡å‘Šè­¦, å†å†™ä¸€ä¸ªç›‘æ§è„šæœ¬ç›‘æ§æ—¥å¿—è¾“å‡º? å¤ªLOW</li>
<li>äººè„‘çœŸçš„è®°ä¸ä½è¿™ä¹ˆå¤šå¤‡ä»½ä¸å¤‡ä»½æœåŠ¡å™¨çš„mappingå…³ç³», æ¯æ¬¡éƒ½ç™»å½•æœåŠ¡å™¨å»æŸ¥å—? æ•ˆç‡å¤ªä½</li>
<li>ä½ èƒ½è¯´å‡ºæ¯ä¸ªåº“å¤‡ä»½å¤šå¤§å—? å¤‡ä»½ç”¨äº†å¤šä¹…? rsyncç”¨äº†å¤šä¹…? è¿™äº›æŒ‡æ ‡å¼‚å¸¸èƒ½ååº”å‡ºä»€ä¹ˆé—®é¢˜</li>
<li>å¤‡ä»½éœ€è¦å®šæœŸæ ¡éªŒå¯ç”¨æ€§, æ‰‹å·¥æ ¡éªŒè´¹æ—¶è´¹åŠ›</li>
</ul>
<p>åŸºäºä»¥ä¸ŠåŸå› , æˆ‘åšäº†æ”¹è¿›, ç¼–å†™äº†ä¸€ä¸ªå¤‡ä»½å·¥å…·<a target="_blank" rel="noopener" href="https://github.com/Fanduzi/pybackup">pybackup</a></p>
<blockquote>
<p>pybackupæºè‡ªäºå¯¹çº¿ä¸Šå¤‡ä»½è„šæœ¬çš„æ”¹è¿›å’Œå¯¹å¤‡ä»½æƒ…å†µçš„ç›‘æ§éœ€æ±‚.<br>åŸæœ¬ç”Ÿäº§åº“çš„å¤‡ä»½æ˜¯é€šè¿‡shellè„šæœ¬è°ƒç”¨mydumper,ä¹‹åå†å°†å¤‡ä»½é€šè¿‡rsyncä¼ è¾“åˆ°å¤‡ä»½æœº.<br>æƒ³è¦è·å–å¤‡ä»½çŠ¶æ€,æ—¶é—´,rsyncä¼ è¾“æ—¶é—´ç­‰ä¿¡æ¯åªèƒ½é€šè¿‡è§£ææ—¥å¿—.<br>pybackupç”±pythonç¼–å†™,è°ƒç”¨mydumperå’Œrsync,å°†å¤‡ä»½ä¿¡æ¯å­˜å…¥æ•°æ®åº“ä¸­,åæœŸå¯ä»¥é€šè¿‡grafanaå›¾å½¢åŒ–å±•ç¤ºå’Œç›‘æ§å¤‡ä»½<br>pybackup æä¾›äº†validate-backupå‘½ä»¤ ,ç›®å‰æˆ‘å†å¤‡ä»½æœåŠ¡å™¨ä¸Šéƒ½å®‰è£…äº†MySQL, é€šè¿‡å®šæ—¶ä»»åŠ¡, pybackupä¼šä»catalogå…ƒæ•°æ®ä¸­è·å–éœ€è¦è¿›è¡Œæ ¡éªŒçš„å¤‡ä»½è‡ªåŠ¨æ ¡éªŒå¤‡ä»½</p>
</blockquote>
<p>å¤‡ä»½ä¿¡æ¯ä¸€è§ˆæ— é—</p>
<figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">root@</span>localhost <span class="number">23</span>:<span class="number">49</span>:  [catalogdb]&gt; select * <span class="keyword">from</span> user_backup where tag=<span class="string">&#x27;BI_Dota_2&#x27;</span> order by id desc limit <span class="number">1</span>\G</span><br><span class="line">*************************** <span class="number">1.</span> row ***************************</span><br><span class="line">             id: <span class="number">2151</span></span><br><span class="line">          bk_id: b591ccc4<span class="number">-4</span>a16<span class="number">-11e8</span><span class="number">-953f</span><span class="number">-005056</span>b106c0</span><br><span class="line">      bk_server: xx.xx.xx.xx</span><br><span class="line">     start_time: <span class="number">2018</span><span class="number">-04</span><span class="number">-27</span> <span class="number">20</span>:<span class="number">30</span>:<span class="number">03</span></span><br><span class="line">       end_time: <span class="number">2018</span><span class="number">-04</span><span class="number">-27</span> <span class="number">22</span>:<span class="number">54</span>:<span class="number">50</span></span><br><span class="line">   elapsed_time: <span class="number">8687</span></span><br><span class="line">    backuped_db: BI,mysql,sys,test,test1</span><br><span class="line">    is_complete: Y</span><br><span class="line">        bk_size: <span class="number">116</span>G</span><br><span class="line">         bk_dir: /data3/backup_db/<span class="number">2018</span><span class="number">-04</span><span class="number">-27</span>/b591ccc4<span class="number">-4</span>a16<span class="number">-11e8</span><span class="number">-953f</span><span class="number">-005056</span>b106c0/</span><br><span class="line"> transfer_start: <span class="number">2018</span><span class="number">-04</span><span class="number">-27</span> <span class="number">22</span>:<span class="number">54</span>:<span class="number">51</span></span><br><span class="line">   transfer_end: <span class="number">2018</span><span class="number">-04</span><span class="number">-27</span> <span class="number">23</span>:<span class="number">21</span>:<span class="number">27</span></span><br><span class="line">transfer_elapsed: <span class="number">1596</span></span><br><span class="line">transfer_complete: Y</span><br><span class="line">    remote_dest: <span class="symbol">platform@</span>xx.xx.xx.xx/db_backup4/xx.xx.xx.xx/</span><br><span class="line">  master_status: mysql-bin<span class="number">.000016</span>,<span class="number">63744177</span>,</span><br><span class="line">   slave_status: mysql-bin<span class="number">.002559</span>,<span class="number">915074196</span>,</span><br><span class="line">   tool_version: mydumper <span class="number">0.9</span><span class="number">.2</span>, built against MySQL <span class="number">5.5</span><span class="number">.53</span></span><br><span class="line"> server_version: <span class="number">5.7</span><span class="number">.21</span><span class="number">-20</span>-log</span><br><span class="line">pybackup_version: pybackup <span class="number">0.10</span><span class="number">.11</span><span class="number">.0</span></span><br><span class="line">     bk_command: mydumper --password=supersecrect --user=root --socket=/data/mysqldata/<span class="number">3306</span>/mysql.sock --outputdir=/data3/backup_db/<span class="number">2018</span><span class="number">-04</span><span class="number">-27</span>/b591ccc4<span class="number">-4</span>a16<span class="number">-11e8</span><span class="number">-953f</span><span class="number">-005056</span>b106c0/ --verbose=<span class="number">3</span> --compress --threads=<span class="number">6</span> --triggers --events --routines --use-savepoints --regex=<span class="string">&quot;^(BI\.|mysql\.|sys\.|test\.|test1\.)&quot;</span></span><br><span class="line">            tag: BI_Dota_2</span><br><span class="line">     is_deleted: N</span><br><span class="line">validate_status: N/A</span><br><span class="line"><span class="number">1</span> row <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>
<p>å¤‡ä»½åœ¨å“ªä¸€æŸ¥å°±çŸ¥é“</p>
<figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">root@</span>localhost <span class="number">23</span>:<span class="number">51</span>:  [catalogdb]&gt; select * <span class="keyword">from</span> user_backup_path;</span><br><span class="line">+----+-----------------+----------------+--------------------------------------------+--------------------------------+------------+</span><br><span class="line">| id | bk_server       | remote_server  | real_path                                  | tag                            | is_offline |</span><br><span class="line">+----+-----------------+----------------+--------------------------------------------+--------------------------------+------------+</span><br><span class="line">|  <span class="number">1</span> | <span class="number">120.27</span><span class="number">.136</span><span class="number">.24</span>   | <span class="number">116.3</span><span class="number">.130</span><span class="number">.8</span>    | /data1/backup/db_backup/<span class="number">120.27</span><span class="number">.16</span><span class="number">.247</span>/     | å›½å†…å¹³å°ä»<span class="number">1</span>                     | N          |</span><br><span class="line">|  <span class="number">2</span> | <span class="number">101.37</span><span class="number">.164</span><span class="number">.13</span>   | <span class="number">116.3</span><span class="number">.130</span><span class="number">.8</span>    | /data2/backup/db_backup/<span class="number">101.37</span><span class="number">.14</span><span class="number">.13</span>/      | å›½å†…å¹³å°ä¸»<span class="number">2</span>                     | N          |</span><br><span class="line">|  <span class="number">3</span> | <span class="number">120.27</span><span class="number">.139</span><span class="number">.12</span>   | <span class="number">116.3</span><span class="number">.130</span><span class="number">.8</span>    | /data2/backup/db_backup/<span class="number">120.27</span><span class="number">.19</span><span class="number">.126</span>/     | å›½å†…æ—¥å¿—ä¸»<span class="number">1</span>                     | N          |</span><br><span class="line"></span><br><span class="line"><span class="number">23</span> rows <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>
<p>æ¢å¤ç”¨æ—¶, å¿ƒé‡Œæœ‰æ•°</p>
<figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">root@</span>localhost <span class="number">23</span>:<span class="number">52</span>:  [catalogdb]&gt; select * <span class="keyword">from</span> user_recover_info limit <span class="number">1</span>\G</span><br><span class="line">*************************** <span class="number">1.</span> row ***************************</span><br><span class="line">          id: <span class="number">36</span></span><br><span class="line">       bk_id: <span class="number">073836</span>be-e8e5<span class="number">-11e7</span>-b163<span class="number">-00163e0007f</span>1</span><br><span class="line">         tag: å›½å†…sdkä»<span class="number">1</span></span><br><span class="line"> backup_path: /data2/backup/db_backup/<span class="number">120.55</span><span class="number">.74</span><span class="number">.93</span>/<span class="number">2017</span><span class="number">-12</span><span class="number">-25</span>/<span class="number">073836</span>be-e8e5<span class="number">-11e7</span>-b163<span class="number">-00163e0007f</span>1/</span><br><span class="line">          db: dadian</span><br><span class="line">  start_time: <span class="number">2017</span><span class="number">-12</span><span class="number">-26</span> <span class="number">13</span>:<span class="number">59</span>:<span class="number">13</span></span><br><span class="line">    end_time: <span class="number">2017</span><span class="number">-12</span><span class="number">-26</span> <span class="number">14</span>:<span class="number">20</span>:<span class="number">12</span></span><br><span class="line">elapsed_time: <span class="number">1258</span></span><br><span class="line">recover_status: sucess</span><br><span class="line">validate_time: <span class="number">2017</span><span class="number">-12</span><span class="number">-26</span> <span class="number">16</span>:<span class="number">04</span>:<span class="number">04</span></span><br><span class="line"><span class="number">1</span> row <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>
<p>â€‹</p>
<p>pybackupè¿˜éœ€è¦å®Œå–„, æ¯”å¦‚å¯¹äºå¤‡ä»½æ ¡éªŒçš„æ”¹è¿›, å¹¶ä¸”ç›®å‰ä¹Ÿæ²¡æœ‰åšå¯¹xtrabackupçš„æ”¯æŒ</p>
<blockquote>
<p>2018.04.27 æƒ³äº†ä¸‹å¯èƒ½åº”è¯¥æ¢å¤å®Œæˆå, é¦–å…ˆå»åšæºåº“çš„ä»åº“, åŒæ­¥ä¹‹åçœ‹æœ‰æ²¡æœ‰æŠ¥é”™, å†å®Œå–„ç‚¹, åˆ™æ˜¯è¦åšpt-table-checksumæ ¡éªŒ, æœ€è¿‘æ²¡æ—¶é—´, åé¢å†åšå§</p>
</blockquote>
<p><img src="https://raw.githubusercontent.com/Fanduzi/pybackup/master/pybackup.png" alt="pybackupé€»è¾‘å›¾"></p>
<h2 id="æˆ‘ä»¬å¦‚ä½•å¤‡ä»½-å¤§æ‹¿å¦‚ä½•å¤‡ä»½"><a href="#æˆ‘ä»¬å¦‚ä½•å¤‡ä»½-å¤§æ‹¿å¦‚ä½•å¤‡ä»½" class="headerlink" title="æˆ‘ä»¬å¦‚ä½•å¤‡ä»½?å¤§æ‹¿å¦‚ä½•å¤‡ä»½?"></a>æˆ‘ä»¬å¦‚ä½•å¤‡ä»½?å¤§æ‹¿å¦‚ä½•å¤‡ä»½?</h2><p>è¯´äº†è¿™ä¹ˆå¤š, é‚£ä¹ˆæˆ‘ä»¬ç°åœ¨æ˜¯å¦‚ä½•å¤‡ä»½çš„å‘¢? ç›®å‰çº¿ä¸Šç”¨pybackupè°ƒç”¨mydumper, ç›¸æ¯”xtrabackupå¤‡ä»½é›†å°, ç›¸æ¯”mysqldumpä¸€è‡´æ€§æ›´æœ‰ä¿è¯, é€Ÿåº¦æ›´å¿«(mydumperå¯ä»¥å¹¶å‘,mysqldumpåªèƒ½å•çº¿ç¨‹)</p>
<p>å‚åŠ è¿‡ä¸€æ¬¡æŠ€æœ¯å¤§ä¼š, å°è±¡ä¸­<code>Facebook</code> æ˜¯ä½¿ç”¨mysqldumpå¤‡ä»½çš„, ä¸ºä»€ä¹ˆ? è¿™é‡Œè¦è¯´é“ä¸€ä¸‹<br>Facebookæœ‰äº”ä¸ªè¶³çƒåœºå¤§çš„æœºæˆ¿?(å¯èƒ½è®°é”™äº†) , æ€»ä¹‹æ•°æ®åº“ä¼—å¤š, ä»–ä»¬æ›´åœ¨æ„å¤‡ä»½é›†å¾—å¤§å°(é«˜å¯ç”¨ç©çš„6, å­˜å‚¨è¦é’±å•Š)<br>Facebook çš„DBAä¸¥æ ¼é™åˆ¶å•ä¸ªæ•°æ®åº“çš„å¤§å°ä¸º200G, è¿™æ ·mysqldumpå¤‡ä»½æ—¶é—´å¿«, åŒæ—¶æ˜“äºç®¡ç†. Facebook DBAæ”¹è¿›äº†å¤‡ä»½æ–¹æ¡ˆ, ä»–ä»¬å¤§è‡´æ˜¯å‘¨ä¸€ä¸€ä¸ªmysqldumpå…¨å¤‡, ä¹‹åæ¯å¤©å¤‡ä»½binlog, å¹¶åˆ†æbinlogå¯¹å…¶è¿›è¡Œåˆå¹¶å‹ç¼©<br>ä¸¾ä¸ªä¾‹å­:</p>
<ul>
<li>å‘¨ä¸€å»ºäº†ä¸€ä¸ªè¡¨t1, å‘¨äºŒåˆ æ‰äº†, æˆ–è€…å‘¨ä¸€insert t2çš„æ•°æ®A, å‘¨äºŒåˆdeleteæ‰äº†</li>
</ul>
<p>é‚£ä¹ˆå¯¹äºæ¢å¤åˆ°å‘¨äºŒçš„éœ€æ±‚, å°±å¯ä»¥å°†binlogæ—¥å¿—å°±åˆå¹¶, çœç•¥æ‰t1è¡¨ç›¸å…³çš„æ‰€æœ‰è¯­å¥, å’Œå¯¹t2 insert delete Aè®°å½•çš„æ—¥å¿—, é€šè¿‡å¤„ç†çš„æ—¥å¿—, åœ¨å¤‡ä»½ä¸Šåº”ç”¨, ç›´æ¥é€šè¿‡ç¨‹åºæ„é€ ä¸€ä»½å‘¨äºŒçš„å¤‡ä»½<br>æˆ‘åªèƒ½è¯´, ç‰›æ‰¹!ğŸ‚ğŸ‚ğŸ‚</p>
<h2 id="å¦‚æœå¯¹æ­¤æ–‡ç« æœ‰ä½•ç–‘é—®æˆ–æ”¹è¿›å»ºè®®-æ¬¢è¿äº¤æµ"><a href="#å¦‚æœå¯¹æ­¤æ–‡ç« æœ‰ä½•ç–‘é—®æˆ–æ”¹è¿›å»ºè®®-æ¬¢è¿äº¤æµ" class="headerlink" title="å¦‚æœå¯¹æ­¤æ–‡ç« æœ‰ä½•ç–‘é—®æˆ–æ”¹è¿›å»ºè®®, æ¬¢è¿äº¤æµ"></a>å¦‚æœå¯¹æ­¤æ–‡ç« æœ‰ä½•ç–‘é—®æˆ–æ”¹è¿›å»ºè®®, æ¬¢è¿äº¤æµ</h2>
      
    </div>
    <footer class="article-footer">
      
        <div id="donation_div"></div>


<script src="/js/vdonate.js"></script>

<script>
var a = new Donate({
  title: 'å¦‚æœè§‰å¾—æˆ‘çš„æ–‡ç« å¯¹æ‚¨æœ‰ç”¨ï¼Œè¯·éšæ„æ‰“èµã€‚æ‚¨çš„æ”¯æŒå°†é¼“åŠ±æˆ‘ç»§ç»­åˆ›ä½œ!', // å¯é€‰å‚æ•°ï¼Œæ‰“èµæ ‡é¢˜
  btnText: 'æ‰“èµæ”¯æŒ', // å¯é€‰å‚æ•°ï¼Œæ‰“èµæŒ‰é’®æ–‡å­—
  el: document.getElementById('donation_div'),
  wechatImage: 'https://raw.githubusercontent.com/Fanduzi/Fandb.github.io/master/css/images/WechatIMG65.jpeg',
  alipayImage: 'https://raw.githubusercontent.com/Fanduzi/Fandb.github.io/master/css/images/WechatIMG64.jpeg'
});
</script>
      
      
      <div>
        <ul class="post-copyright">
          <li class="post-copyright-author">
          <strong>æœ¬æ–‡ä½œè€…:  </strong>å¤§èŒƒ</a>
          </li>
          <li class="post-copyright-link">
          <strong>æœ¬æ–‡é“¾æ¥:  </strong>
          <a href="/2018/04/28/å¦‚ä½•åšå¥½MySQLçš„å¤‡ä»½/" target="_blank" title="å¦‚ä½•åšå¥½MySQLçš„å¤‡ä»½">http://fuxkdb.com/2018/04/28/å¦‚ä½•åšå¥½MySQLçš„å¤‡ä»½/</a>
          </li>
          <li class="post-copyright-license">
            <strong>ç‰ˆæƒå£°æ˜:   </strong>
            æœ¬åšå®¢æ‰€æœ‰æ–‡ç« é™¤ç‰¹åˆ«å£°æ˜å¤–ï¼Œå‡é‡‡ç”¨ <a rel="license" href="https://creativecommons.org/licenses/by-nc-nd/4.0/" target="_blank" title="Attribution-NonCommercial-NoDerivatives 4.0 International (CC BY-NC-ND 4.0)">CC BY-NC-ND 4.0</a>
            è®¸å¯åè®®ã€‚è½¬è½½è¯·æ³¨æ˜å‡ºå¤„
          </li>
         
        </ul>
<div>

      
      
        
	<div id="comment">
		<!-- æ¥å¿…åŠ›Cityç‰ˆå®‰è£…ä»£ç  -->
		<div id="lv-container" data-id="city" data-uid="MTAyMC8yOTQ4MS82MDQ5">
		<script type="text/javascript">
		   (function(d, s) {
		       var j, e = d.getElementsByTagName(s)[0];

		       if (typeof LivereTower === 'function') { return; }

		       j = d.createElement(s);
		       j.src = 'https://cdn-city.livere.com/js/embed.dist.js';
		       j.async = true;

		       e.parentNode.insertBefore(j, e);
		   })(document, 'script');
		</script>
		<noscript>ä¸ºæ­£å¸¸ä½¿ç”¨æ¥å¿…åŠ›è¯„è®ºåŠŸèƒ½è¯·æ¿€æ´»JavaScript</noscript>
		</div>
		<!-- Cityç‰ˆå®‰è£…ä»£ç å·²å®Œæˆ -->
	</div>



      
      
        
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/MySQL/" rel="tag">MySQL</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/MySQL%E5%A4%87%E4%BB%BD%E6%81%A2%E5%A4%8D/" rel="tag">MySQLå¤‡ä»½æ¢å¤</a></li></ul>

      

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2018/05/29/PXC7%E7%A7%8D%E6%95%85%E9%9A%9C%E5%9C%BA%E6%99%AF%E5%8F%8A%E6%81%A2%E5%A4%8D%E6%96%B9%E6%B3%95/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">ä¸Šä¸€ç¯‡</strong>
      <div class="article-nav-title">
        
          [è¯‘]PXC7ä¸­æ•…éšœåœºæ™¯åŠæ¢å¤æ–¹æ³•
        
      </div>
    </a>
  
  
    <a href="/2018/03/03/Load-data%E5%A5%87%E6%80%AA%E7%9A%84%E9%97%AE%E9%A2%98/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">ä¸‹ä¸€ç¯‡</strong>
      <div class="article-nav-title">Load dataå¥‡æ€ªçš„é—®é¢˜</div>
    </a>
  
</nav>

  
</article>

<!-- Table of Contents -->

  <aside id="toc-sidebar">
    <div id="toc" class="toc-article">
    <strong class="toc-title">æ–‡ç« ç›®å½•</strong>
    
        <ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%A6%82%E4%BD%95%E5%81%9A%E5%A5%BDMySQL%E7%9A%84%E5%A4%87%E4%BB%BD"><span class="nav-number">1.</span> <span class="nav-text">å¦‚ä½•åšå¥½MySQLçš„å¤‡ä»½</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%89%A9%E7%90%86%E5%A4%87%E4%BB%BD%E8%BF%98%E6%98%AF%E9%80%BB%E8%BE%91%E5%A4%87%E4%BB%BD"><span class="nav-number">1.1.</span> <span class="nav-text">ç‰©ç†å¤‡ä»½è¿˜æ˜¯é€»è¾‘å¤‡ä»½?</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%B8%A4%E7%A7%8D%E5%A4%87%E4%BB%BD%E6%96%B9%E5%BC%8F%E7%9A%84%E5%A4%87%E4%BB%BD%E5%B7%A5%E5%85%B7%E6%9C%89"><span class="nav-number">1.1.1.</span> <span class="nav-text">ä¸¤ç§å¤‡ä»½æ–¹å¼çš„å¤‡ä»½å·¥å…·æœ‰:</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%B8%A4%E7%A7%8D%E5%A4%87%E4%BB%BD%E6%96%B9%E5%BC%8F%E7%9A%84%E5%AF%B9%E6%AF%94%E5%A6%82%E4%B8%8B"><span class="nav-number">1.1.2.</span> <span class="nav-text">ä¸¤ç§å¤‡ä»½æ–¹å¼çš„å¯¹æ¯”å¦‚ä¸‹</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%80%89%E6%8B%A9%E4%BB%80%E4%B9%88%E6%A0%B7%E7%9A%84%E5%A4%87%E4%BB%BD%E5%8F%96%E5%86%B3%E4%BA%8E%E4%BD%A0%E6%9C%9F%E6%9C%9B%E7%9A%84MTTR%E5%80%BC%E5%92%8C%E4%BD%A0%E7%9A%84%E6%95%B0%E6%8D%AE%E5%BA%93%E4%BD%93%E7%A7%AF"><span class="nav-number">1.1.3.</span> <span class="nav-text">é€‰æ‹©ä»€ä¹ˆæ ·çš„å¤‡ä»½å–å†³äºä½ æœŸæœ›çš„MTTRå€¼å’Œä½ çš„æ•°æ®åº“ä½“ç§¯</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%80%89%E6%8B%A9%E5%A5%BD%E4%BA%86%E5%A4%87%E4%BB%BD%E6%96%B9%E5%BC%8F-%E5%A6%82%E5%92%8C%E7%94%A8%E5%A5%BD-%E9%81%BF%E5%85%8D%E8%B8%A9%E5%9D%91"><span class="nav-number">1.2.</span> <span class="nav-text">é€‰æ‹©å¥½äº†å¤‡ä»½æ–¹å¼, å¦‚å’Œç”¨å¥½&#x2F;é¿å…è¸©å‘?</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%80%BB%E8%BE%91%E5%A4%87%E4%BB%BD"><span class="nav-number">1.2.1.</span> <span class="nav-text">é€»è¾‘å¤‡ä»½</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%B7%B1%E5%9D%91-mysqldump-%E4%B8%8D%E9%94%81%E9%9D%9E%E4%BA%8B%E5%8A%A1%E8%A1%A8"><span class="nav-number">1.2.1.1.</span> <span class="nav-text">æ·±å‘! mysqldump ä¸é”éäº‹åŠ¡è¡¨</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%A4%87%E4%BB%BD%E6%9C%9F%E9%97%B4%E5%BD%93%E5%BF%83DDL"><span class="nav-number">1.2.1.2.</span> <span class="nav-text">å¤‡ä»½æœŸé—´å½“å¿ƒDDL</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%BD%93%E5%BF%83timestamp%E7%B1%BB%E5%9E%8B%E5%AD%97%E6%AE%B5"><span class="nav-number">1.2.1.3.</span> <span class="nav-text">å½“å¿ƒtimestampç±»å‹å­—æ®µ</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#SELECT-INTO-OUT-FILE%E8%BF%99%E8%B4%A7%E6%9C%89%E4%BB%80%E4%B9%88%E7%94%A8"><span class="nav-number">1.2.1.4.</span> <span class="nav-text">SELECT INTO OUT FILEè¿™è´§æœ‰ä»€ä¹ˆç”¨?</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#TokuDB%E5%BC%95%E6%93%8E%E8%A1%A8%E5%92%8B%E5%A4%87%E4%BB%BD"><span class="nav-number">1.2.1.5.</span> <span class="nav-text">TokuDBå¼•æ“è¡¨å’‹å¤‡ä»½?</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%87%8D%E4%B8%AD%E4%B9%8B%E9%87%8D-binlog%E5%A4%87%E4%BB%BD"><span class="nav-number">1.3.</span> <span class="nav-text">é‡ä¸­ä¹‹é‡, binlogå¤‡ä»½</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%BA%9F%E8%AF%9D%E8%BF%99%E4%B9%88%E5%A4%9A-%E5%A6%82%E4%BD%95%E7%AE%A1%E7%90%86%E5%A5%BD%E4%BD%A0%E7%9A%84%E5%A4%87%E4%BB%BD"><span class="nav-number">1.4.</span> <span class="nav-text">åºŸè¯è¿™ä¹ˆå¤š, å¦‚ä½•ç®¡ç†å¥½ä½ çš„å¤‡ä»½?</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%88%91%E4%BB%AC%E5%A6%82%E4%BD%95%E5%A4%87%E4%BB%BD-%E5%A4%A7%E6%8B%BF%E5%A6%82%E4%BD%95%E5%A4%87%E4%BB%BD"><span class="nav-number">1.5.</span> <span class="nav-text">æˆ‘ä»¬å¦‚ä½•å¤‡ä»½?å¤§æ‹¿å¦‚ä½•å¤‡ä»½?</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%A6%82%E6%9E%9C%E5%AF%B9%E6%AD%A4%E6%96%87%E7%AB%A0%E6%9C%89%E4%BD%95%E7%96%91%E9%97%AE%E6%88%96%E6%94%B9%E8%BF%9B%E5%BB%BA%E8%AE%AE-%E6%AC%A2%E8%BF%8E%E4%BA%A4%E6%B5%81"><span class="nav-number">1.6.</span> <span class="nav-text">å¦‚æœå¯¹æ­¤æ–‡ç« æœ‰ä½•ç–‘é—®æˆ–æ”¹è¿›å»ºè®®, æ¬¢è¿äº¤æµ</span></a></li></ol></li></ol>
    
    </div>
  </aside>

</section>
        
      </div>
      
      <footer id="footer">
  

  <div class="container">
      	<div class="row">
	      <p> Powered by <a href="http://hexo.io/" target="_blank">Hexo</a> and <a href="https://github.com/iTimeTraveler/hexo-theme-hiker" target="_blank">Hexo-theme-hiker</a> </p>
	      <p id="copyRightEn">Copyright &copy; 2013 - 2022 Fan() All Rights Reserved.</p>
	      
	      
    		<p class="busuanzi_uv">
				è®¿å®¢æ•° : <span id="busuanzi_value_site_uv"></span> |  
				è®¿é—®é‡ : <span id="busuanzi_value_site_pv"></span>
		    </p>
  		   
		</div>

		
  </div>
</footer>


<!-- min height -->

<script>
    var wrapdiv = document.getElementById("wrap");
    var contentdiv = document.getElementById("content");
    var allheader = document.getElementById("allheader");

    wrapdiv.style.minHeight = document.body.offsetHeight + "px";
    if (allheader != null) {
      contentdiv.style.minHeight = document.body.offsetHeight - allheader.offsetHeight - document.getElementById("footer").offsetHeight + "px";
    } else {
      contentdiv.style.minHeight = document.body.offsetHeight - document.getElementById("footer").offsetHeight + "px";
    }
</script>
    </div>
    <!-- <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
    <a href="/tags" class="mobile-nav-link">Tags</a>
  
    <a href="/about" class="mobile-nav-link">About</a>
  
</nav> -->
    

<!-- mathjax config similar to math.stackexchange -->

<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [ ['$','$'], ["\\(","\\)"] ],
      processEscapes: true
    }
  });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      tex2jax: {
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
      }
    });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for(i=0; i < all.length; i += 1) {
            all[i].SourceElement().parentNode.className += ' has-jax';
        }
    });
</script>

<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>


  
<link rel="stylesheet" href="/fancybox/jquery.fancybox.css">

  
<script src="/fancybox/jquery.fancybox.pack.js"></script>




<script src="/js/scripts.js"></script>





  
<script src="/js/dialog.js"></script>









	<div style="display: none;">
    <script src="https://s95.cnzz.com/z_stat.php?id=1260716016&web_id=1260716016" language="JavaScript"></script>
  </div>



	<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js">
	</script>






  </div>

  <div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true" style="display: none;">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h2 class="modal-title" id="myModalLabel">è®¾ç½®</h2>
      </div>
      <hr style="margin-top:0px; margin-bottom:0px; width:80%; border-top: 3px solid #000;">
      <hr style="margin-top:2px; margin-bottom:0px; width:80%; border-top: 1px solid #000;">


      <div class="modal-body">
          <div style="margin:6px;">
            <a data-toggle="collapse" data-parent="#accordion" href="#collapseOne" onclick="javascript:setFontSize();" aria-expanded="true" aria-controls="collapseOne">
              æ­£æ–‡å­—å·å¤§å°
            </a>
          </div>
          <div id="collapseOne" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingOne">
          <div class="panel-body">
            æ‚¨å·²è°ƒæ•´é¡µé¢å­—ä½“å¤§å°
          </div>
        </div>
      


          <div style="margin:6px;">
            <a data-toggle="collapse" data-parent="#accordion" href="#collapseTwo" onclick="javascript:setBackground();" aria-expanded="true" aria-controls="collapseTwo">
              å¤œé—´æŠ¤çœ¼æ¨¡å¼
            </a>
        </div>
          <div id="collapseTwo" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingTwo">
          <div class="panel-body">
            å¤œé—´æ¨¡å¼å·²ç»å¼€å¯ï¼Œå†æ¬¡å•å‡»æŒ‰é’®å³å¯å…³é—­ 
          </div>
        </div>

        <div>
            <a data-toggle="collapse" data-parent="#accordion" href="#collapseThree" aria-expanded="true" aria-controls="collapseThree">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;å…³ äº&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a>
        </div>
         <div id="collapseThree" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingThree">
          <div class="panel-body">
            Fan()
          </div>
          <div class="panel-body">
            Copyright Â© 2022 å¤§èŒƒ All Rights Reserved.
          </div>
        </div>
      </div>


      <hr style="margin-top:0px; margin-bottom:0px; width:80%; border-top: 1px solid #000;">
      <hr style="margin-top:2px; margin-bottom:0px; width:80%; border-top: 3px solid #000;">
      <div class="modal-footer">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">Ã—</span></button>
      </div>
    </div>
  </div>
</div>
  
  <a id="rocket" href="#top" class=""></a>
  <script type="text/javascript" src="/js/totop.js?v=1.0.0" async=""></script>
  
    <a id="menu-switch"><i class="fa fa-bars fa-lg"></i></a>
  
</body>
</html>